{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { CartItem } from '../models/cartItem';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.cartItems = [];\n    this.cartSubject = new BehaviorSubject(this.cartItems);\n    this.cart$ = this.cartSubject.asObservable();\n  }\n  getCartItems() {\n    return this.cartItems;\n  }\n  addToCart(product, quantity) {\n    const existingItem = this.cartItems.find(item => item.product.id === product.id);\n    if (existingItem) {\n      existingItem.quantity += quantity;\n    } else {\n      this.cartItems.push(new CartItem(product, quantity));\n    }\n    this.cartSubject.next(this.cartItems);\n    alert(`${product.name} added to cart!`);\n  }\n  updateQuantity(productId, quantity) {\n    const item = this.cartItems.find(item => item.product.id === productId);\n    if (item) {\n      item.quantity = quantity;\n      if (item.quantity <= 0) {\n        this.removeFromCart(productId);\n      } else {\n        this.cartSubject.next(this.cartItems);\n      }\n    }\n  }\n  removeFromCart(productId) {\n    this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n    this.cartSubject.next(this.cartItems);\n  }\n  clearCart() {\n    this.cartItems = [];\n    this.cartSubject.next(this.cartItems);\n  }\n  getTotalPrice() {\n    return this.cartItems.reduce((total, item) => total + item.getTotalPrice(), 0);\n  }\n  getTotalItems() {\n    return this.cartItems.reduce((total, item) => total + item.quantity, 0);\n  }\n  static {\n    this.ɵfac = function CartService_Factory(t) {\n      return new (t || CartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","CartItem","CartService","constructor","cartItems","cartSubject","cart$","asObservable","getCartItems","addToCart","product","quantity","existingItem","find","item","id","push","next","alert","name","updateQuantity","productId","removeFromCart","filter","clearCart","getTotalPrice","reduce","total","getTotalItems","factory","ɵfac","providedIn"],"sources":["C:\\C5\\Full stack\\My_store\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { CartItem } from '../models/cartItem';\r\nimport { Product } from '../models/product_temp';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartService {\r\n  private cartItems: CartItem[] = [];\r\n  private cartSubject = new BehaviorSubject<CartItem[]>(this.cartItems);\r\n  public cart$: Observable<CartItem[]> = this.cartSubject.asObservable();\r\n\r\n  constructor() { }\r\n\r\n  getCartItems(): CartItem[] {\r\n    return this.cartItems;\r\n  }\r\n\r\n  addToCart(product: Product, quantity: number): void {\r\n    const existingItem = this.cartItems.find(item => item.product.id === product.id);\r\n    \r\n    if (existingItem) {\r\n      existingItem.quantity += quantity;\r\n    } else {\r\n      this.cartItems.push(new CartItem(product, quantity));\r\n    }\r\n    \r\n    this.cartSubject.next(this.cartItems);\r\n    alert(`${product.name} added to cart!`);\r\n  }\r\n\r\n  updateQuantity(productId: number, quantity: number): void {\r\n    const item = this.cartItems.find(item => item.product.id === productId);\r\n    if (item) {\r\n      item.quantity = quantity;\r\n      if (item.quantity <= 0) {\r\n        this.removeFromCart(productId);\r\n      } else {\r\n        this.cartSubject.next(this.cartItems);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeFromCart(productId: number): void {\r\n    this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\r\n    this.cartSubject.next(this.cartItems);\r\n  }\r\n\r\n  clearCart(): void {\r\n    this.cartItems = [];\r\n    this.cartSubject.next(this.cartItems);\r\n  }\r\n\r\n  getTotalPrice(): number {\r\n    return this.cartItems.reduce((total, item) => total + item.getTotalPrice(), 0);\r\n  }\r\n\r\n  getTotalItems(): number {\r\n    return this.cartItems.reduce((total, item) => total + item.quantity, 0);\r\n  }\r\n}"],"mappings":"AACA,SAASA,eAAe,QAAoB,MAAM;AAClD,SAASC,QAAQ,QAAQ,oBAAoB;;AAM7C,OAAM,MAAOC,WAAW;EAKtBC,YAAA;IAJQ,KAAAC,SAAS,GAAe,EAAE;IAC1B,KAAAC,WAAW,GAAG,IAAIL,eAAe,CAAa,IAAI,CAACI,SAAS,CAAC;IAC9D,KAAAE,KAAK,GAA2B,IAAI,CAACD,WAAW,CAACE,YAAY,EAAE;EAEtD;EAEhBC,YAAYA,CAAA;IACV,OAAO,IAAI,CAACJ,SAAS;EACvB;EAEAK,SAASA,CAACC,OAAgB,EAAEC,QAAgB;IAC1C,MAAMC,YAAY,GAAG,IAAI,CAACR,SAAS,CAACS,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACJ,OAAO,CAACK,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;IAEhF,IAAIH,YAAY,EAAE;MAChBA,YAAY,CAACD,QAAQ,IAAIA,QAAQ;IACnC,CAAC,MAAM;MACL,IAAI,CAACP,SAAS,CAACY,IAAI,CAAC,IAAIf,QAAQ,CAACS,OAAO,EAAEC,QAAQ,CAAC,CAAC;IACtD;IAEA,IAAI,CAACN,WAAW,CAACY,IAAI,CAAC,IAAI,CAACb,SAAS,CAAC;IACrCc,KAAK,CAAC,GAAGR,OAAO,CAACS,IAAI,iBAAiB,CAAC;EACzC;EAEAC,cAAcA,CAACC,SAAiB,EAAEV,QAAgB;IAChD,MAAMG,IAAI,GAAG,IAAI,CAACV,SAAS,CAACS,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACJ,OAAO,CAACK,EAAE,KAAKM,SAAS,CAAC;IACvE,IAAIP,IAAI,EAAE;MACRA,IAAI,CAACH,QAAQ,GAAGA,QAAQ;MACxB,IAAIG,IAAI,CAACH,QAAQ,IAAI,CAAC,EAAE;QACtB,IAAI,CAACW,cAAc,CAACD,SAAS,CAAC;MAChC,CAAC,MAAM;QACL,IAAI,CAAChB,WAAW,CAACY,IAAI,CAAC,IAAI,CAACb,SAAS,CAAC;MACvC;IACF;EACF;EAEAkB,cAAcA,CAACD,SAAiB;IAC9B,IAAI,CAACjB,SAAS,GAAG,IAAI,CAACA,SAAS,CAACmB,MAAM,CAACT,IAAI,IAAIA,IAAI,CAACJ,OAAO,CAACK,EAAE,KAAKM,SAAS,CAAC;IAC7E,IAAI,CAAChB,WAAW,CAACY,IAAI,CAAC,IAAI,CAACb,SAAS,CAAC;EACvC;EAEAoB,SAASA,CAAA;IACP,IAAI,CAACpB,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,WAAW,CAACY,IAAI,CAAC,IAAI,CAACb,SAAS,CAAC;EACvC;EAEAqB,aAAaA,CAAA;IACX,OAAO,IAAI,CAACrB,SAAS,CAACsB,MAAM,CAAC,CAACC,KAAK,EAAEb,IAAI,KAAKa,KAAK,GAAGb,IAAI,CAACW,aAAa,EAAE,EAAE,CAAC,CAAC;EAChF;EAEAG,aAAaA,CAAA;IACX,OAAO,IAAI,CAACxB,SAAS,CAACsB,MAAM,CAAC,CAACC,KAAK,EAAEb,IAAI,KAAKa,KAAK,GAAGb,IAAI,CAACH,QAAQ,EAAE,CAAC,CAAC;EACzE;;;uBApDWT,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAA2B,OAAA,EAAX3B,WAAW,CAAA4B,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}