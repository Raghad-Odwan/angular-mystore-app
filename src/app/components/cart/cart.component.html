<div class="container">
  <h2>Shopping Cart</h2>

  <div *ngIf="cartItems.length === 0" class="empty-cart">
    <p>Your cart is empty.</p>
    <button routerLink="/" class="btn-primary">Continue Shopping</button>
  </div>

  <div *ngIf="cartItems.length > 0">
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of cartItems">
        <img [src]="item.product.url" [alt]="item.product.name" class="cart-item-image">
        
        <div class="cart-item-details">
          <h3>{{ item.product.name }}</h3>
          <p class="item-price">{{ item.product.price | currency:'USD':'symbol':'1.2-2' }}</p>
        </div>

        <div class="cart-item-quantity">
          <label>Quantity:</label>
          <input 
            type="number" 
            [value]="item.quantity"
            (change)="updateQuantity(item.product.id, $any($event.target).value)"
            min="1"
            max="99"
            class="quantity-input">
        </div>

        <div class="cart-item-total">
          <p>{{ item.getTotalPrice() | currency:'USD':'symbol':'1.2-2' }}</p>
        </div>

        <button (click)="removeItem(item.product.id)" class="btn-remove">Remove</button>
      </div>
    </div>

    <div class="cart-summary">
      <h3>Order Total: {{ totalPrice | currency:'USD':'symbol':'1.2-2' }}</h3>
    </div>

    <div class="checkout-form">
      <h3>Checkout Information</h3>
      <form (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="fullName">Full Name (minimum 3 characters):</label>
          <input 
            type="text" 
            id="fullName"
            [(ngModel)]="fullName"
            name="fullName"
            required
            minlength="3"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="address">Address:</label>
          <input 
            type="text" 
            id="address"
            [(ngModel)]="address"
            name="address"
            required
            class="form-control">
        </div>

        <div class="form-group">
          <label for="creditCard">Credit Card Number (16 digits):</label>
          <input 
            type="text" 
            id="creditCard"
            [(ngModel)]="creditCard"
            name="creditCard"
            required
            minlength="16"
            maxlength="16"
            class="form-control">
        </div>

        <button type="submit" class="btn-submit">Complete Purchase</button>
      </form>
    </div>
  </div>
</div>